/*
Title: Creating a boilerplate project using maven archetype
Description: This description will go in the meta description tag
*/

# Creating a boilerplate project using maven archetype

This will show how to create a boilerplate GraphWalker project using the maven archetype.


## Download and install the dependencies

 * Install the Java JDK, 7 or 8 will do
 * Install the [Maven](http://maven.apache.org/download.cgi)
 * Install the [yEd editor](http://www.yworks.com/en/products_yed_about.html)

## Create a boilerplate project
From the command line, run:
~~~
%> mvn archetype:generate -B -DarchetypeGroupId=org.graphwalker -DarchetypeArtifactId=graphwalker-maven-archetype -DgroupId=com.company -DartifactId=myProject
~~~
Move into the myProject folder, and test the project:
~~~
%> cd myProject
~~~
Now, run a test:
~~~
%> mvn graphwalker:test
~~~
You now have a complete GraphWalker 3 project, and you also ran the test.

### About auto-generated sources

The maven command above generated an interface **SmallTest**, from the model **SmallTest.graphml**. This feature helps the developer to keep the code in sync with the model(s). The requirement is that the graphml file needs to be in folder path, which is the same (package) path as for the java project, but under resource path instead.

<figure>
  <img src="/content/images/folderPaths.png" alt="Folder paths">
  <figcaption>The source code layout after the auto source code generation is done.</figcaption>
</figure>

The interface will be generated, named and placed into the folder: **target/generated-sources/graphwalker/com/company/SmallTest.java**
~~~
// Generated by GraphWalker (http://www.graphwalker.org)
package com.company;

import org.graphwalker.java.annotation.Model;
import org.graphwalker.java.annotation.Vertex;
import org.graphwalker.java.annotation.Edge;

@Model(file = "com/company/SmallTest.graphml")
public interface SmallTest {

    @Edge()
    void e_SomeAction();

    @Vertex()
    void v_VerifySomeOtherAction();

    @Edge()
    void e_FirstAction();

    @Vertex()
    void v_VerifySomeAction();

    @Edge()
    void e_AnotherAction();

    @Edge()
    void e_SomeOtherAction();
}
~~~

### The model

The test is itself is quite simple. When opened in the yEd editor, it will look like below.

<figure>
  <img src="/content/images/SmallTest.png" alt="Small test model">
  <figcaption>The model <strong><a href="https://github.com/GraphWalker/graphwalker-maven-archetype/raw/master/src/main/resources/archetype-resources/src/main/resources/SmallTest.graphml">SmallTest.graphml</a></strong> that is used for this test.</figcaption>
</figure>

### The test automation code

The class **SomeSmallTest** implements the interface **SmallTest**. The annotation <code>@GraphWalker(value = "random(edge_coverage(100))", start = "e_FirstAction")</code> tells GraphWalker to start the test at the edge <code>e_FirstAction</code>, using a random path generator with 100% edge coverage.

~~~
package com.company;

import org.graphwalker.core.machine.ExecutionContext;
import org.graphwalker.java.annotation.GraphWalker;

@GraphWalker(value = "random(edge_coverage(100))", start = "e_FirstAction")
public class SomeSmallTest extends ExecutionContext implements SmallTest {

    @Override
    public void e_FirstAction() {
        System.out.println("Running: e_FirstAction");
    }

    @Override
    public void e_AnotherAction() {
        System.out.println("Running: e_AnotherAction");
    }

    @Override
    public void e_SomeAction() {
        System.out.println("Running: e_SomeAction");
    }

    @Override
    public void e_SomeOtherAction() {
        System.out.println("Running: e_SomeOtherAction");
    }

    @Override
    public void v_VerifySomeAction() {
        System.out.println("Running: v_VerifySomeAction");
    }

    @Override
    public void v_VerifySomeOtherAction() {
        System.out.println("Running: v_VerifySomeOtherAction");
    }
}
~~~

## Running the test
When running the the test the output might look something like this:
~~~
%> mvn graphwalker:test
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building GraphWalker Example 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] >>> graphwalker-maven-plugin:3.0.1-SNAPSHOT:test (default-cli) @ myProject >>>
[INFO] 
[INFO] --- graphwalker-maven-plugin:3.0.1-SNAPSHOT:validate-models (default-cli) @ myProject ---
[INFO] 
[INFO] --- graphwalker-maven-plugin:3.0.1-SNAPSHOT:generate-sources (default-cli) @ myProject ---
[INFO] Reflections took 679 ms to scan 30 urls, producing 1830 keys and 6753 values 
[INFO] Generate /tmp/krikar/myProject/src/main/resources/com/company/SmallTest.graphml
[INFO] 
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ myProject ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.5.1:compile (default-compile) @ myProject ---
[INFO] Compiling 2 source files to /tmp/krikar/myProject/target/classes
[INFO] 
[INFO] --- graphwalker-maven-plugin:3.0.1-SNAPSHOT:generate-test-sources (generate-test-sources) @ myProject ---
[INFO] 
[INFO] --- graphwalker-maven-plugin:3.0.1-SNAPSHOT:validate-test-models (default-cli) @ myProject ---
[INFO] 
[INFO] --- graphwalker-maven-plugin:3.0.1-SNAPSHOT:generate-test-sources (default-cli) @ myProject ---
[INFO] 
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ myProject ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /tmp/krikar/myProject/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.5.1:testCompile (default-testCompile) @ myProject ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< graphwalker-maven-plugin:3.0.1-SNAPSHOT:test (default-cli) @ myProject <<<
[INFO] 
[INFO] --- graphwalker-maven-plugin:3.0.1-SNAPSHOT:test (default-cli) @ myProject ---
[INFO] ------------------------------------------------------------------------
[INFO]   _____             _   _ _ _     _ _                                   
[INFO]  |   __|___ ___ ___| |_| | | |___| | |_ ___ ___                         
[INFO]  |  |  |  _| .'| . |   | | | | .'| | '_| -_|  _|                        
[INFO]  |_____|_| |__,|  _|_|_|_____|__,|_|_,_|___|_|                          
[INFO]                |_|         (3.0.1-SNAPSHOT)                            
[INFO] ------------------------------------------------------------------------
[INFO] Reflections took 476 ms to scan 45 urls, producing 2102 keys and 7620 values 
[INFO] Configuration:
[INFO]     Include = [*]
[INFO]     Exclude = []
[INFO]      Groups = [*]
[INFO] 
[INFO] Tests:
[INFO]     SomeSmallTest(RandomPath, EdgeCoverage, 100)
[INFO] 
[INFO] ------------------------------------------------------------------------
Running: e_FirstAction
Running: v_VerifySomeAction
Running: e_AnotherAction
Running: v_VerifySomeOtherAction
Running: e_SomeOtherAction
Running: v_VerifySomeOtherAction
Running: e_SomeOtherAction
Running: v_VerifySomeOtherAction
Running: e_SomeOtherAction
Running: v_VerifySomeOtherAction
Running: e_SomeOtherAction
Running: v_VerifySomeOtherAction
Running: e_SomeOtherAction
Running: v_VerifySomeOtherAction
Running: e_SomeAction
Running: v_VerifySomeAction
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] Result :
[INFO] 
[INFO] Tests: 1, Completed: 1, Incomplete: 0, Failed: 0, Not Executed: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.995s
[INFO] Finished at: Fri Sep 26 16:21:37 CEST 2014
[INFO] Final Memory: 37M/444M
[INFO] ------------------------------------------------------------------------
~~~
